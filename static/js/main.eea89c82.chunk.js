(this.webpackJsonpshotterud=this.webpackJsonpshotterud||[]).push([[0],{113:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(25),i=n.n(r),c=n(13),l=n(167),o=n(96),j=n(42),d=n(168),u=n(170),b=n(171),m=n(172),x=n(164),f=n(159),O=n(161),h=n(90),p=n.n(h),g=n(61),v=n.n(g),y=n(91),S=n.n(y),N=n(50),M=n(29),k=n(2);function C(e){var t=e.prevNames,n=e.setPrevNames,a=e.settings,s=e.setSettings,r=Object(M.a)();return Object(k.jsx)(d.a,{position:"static",children:Object(k.jsxs)(u.a,{children:[Object(k.jsx)(v.a,{sx:{mr:1}}),Object(k.jsx)(p.a,{sx:{mr:1}}),Object(k.jsx)(b.a,{id:"prev-names",sx:{display:"flex",flex:1,alignItems:"center"},children:t.map((function(e,t){return 0!==t?Object(k.jsxs)(b.a,{sx:{display:"flex"},children:[Object(k.jsx)(b.a,{sx:{width:2,minHeight:"100%",bgcolor:"white",ml:1,mr:1}}),Object(k.jsx)(m.a,{children:e})]},t):Object(k.jsx)(m.a,{children:e},t)}))}),Object(k.jsx)(x.a,{startIcon:Object(k.jsx)(S.a,{}),color:"inherit",onClick:function(){return n([])},children:"Clear"}),Object(k.jsx)(f.a,{name:"theme",value:a.theme,label:"Theme",onChange:function(e){return s(Object(j.a)(Object(j.a)({},a),{},{theme:e.target.value}))},size:"small",sx:{ml:2,color:r.palette.primary.contrastText,borderColor:r.palette.primary.contrastText},children:Object.keys(N).map((function(e,t){return Object(k.jsx)(O.a,{value:e,children:N[e].name},t)}))})]})})}n(113);var w=n(78),T=n.n(w),E=n(92),A=n(173),D=n(93),I=n.n(D),H=n(14),J=n(24),P=n.n(J);n(115);function R(e){var t=e.names,n=e.spinnerNr,s=(e.prevNames,e.setPrevNames),r=Object(a.useCallback)((function(){var e=t,a=[],r=P()("#loadout"+n),c=30,l=1e4;P()("#roll"+n).attr("disabled",!0);var o,j,d=0,u=0;P()(r).html(""),P()("#log"+n).html(""),r.css("left","100%"),e.length<10?(c=20,l=5e3):(c=10,l=1e4);for(var b=0;b<c;b++){i(a=e);for(var m=0;m<e.length;m++)r.append('<td><div class="roller"><div>'+a[m]+"</div></div></td>"),d+=192}u=Math.round(d/2),o=u-300,j=u+300,u=Math.floor(Math.random()*(j-o+1)+o),P()("#loadout"+n).animate({left:"-="+u},l,(function(){P()("#roll"+n).attr("disabled",!1),P()("#loadout"+n).children("td").each((function(){var e=window.innerWidth/2;if(P()(this).offset().left<e&&P()(this).offset().left+185>e){var t=P()(this).children().text();P()("#log"+n).append('Sk\xe5l <span class="badge">'+t+"!</span>"),s((function(e){return[t].concat(e)}))}}))}))}),[t,s,n]);function i(e){for(var t,n,a=e.length;a>0;)n=Math.random()*a--|0,t=e[a],e[a]=e[n],e[n]=t}return Object(a.useEffect)((function(){return r()}),[r]),Object(k.jsxs)("div",{className:"container",children:[Object(k.jsx)("div",{className:"row topbox",children:Object(k.jsxs)("div",{className:"col-md-6 col-md-offset-3 rollbox",children:[Object(k.jsx)("div",{className:"line"}),Object(k.jsx)("table",{children:Object(k.jsx)("tbody",{children:Object(k.jsx)("tr",{className:"loadout",id:"loadout"+n})})})]})}),Object(k.jsx)("div",{className:"col-md-12",style:{textAlign:"center"},children:Object(k.jsx)("div",{className:"log",id:"log"+n})})]})}function F(e){var t=e.names,n=e.settings,s=e.prevNames,r=e.setPrevNames,c=Object(H.f)(),l=Object(M.a)(),o=Object(a.useRef)(!1),j=function(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"]"},d=Object(a.useCallback)((function(){if(o.current){console.log(j()+" Generating Spinners...");var e=101*Math.random(),a=e>80&&n.amtSpinners>=2,i=e>90&&n.amtSpinners>=3,c=1;return e>95&&n.amtSpinners>=4?c=4:i?c=3:a&&(c=2),Object(k.jsx)(b.a,{children:Array(c).fill().map((function(e,n){return Object(k.jsx)(R,{names:t,spinnerNr:n,prevNames:s,setPrevNames:r},n)}))})}}),[t,n.amtSpinners,r]),u=Object(a.useCallback)((function(){return console.log(j()+" Picking Random Time..."),new Promise((function(e,t){setTimeout((function(){e()}),1e3*(Math.random()*(60*n.minMaxMinutes[1]-60*n.minMaxMinutes[0])+60*n.minMaxMinutes[0]))}))}),[n.minMaxMinutes]),x=Object(a.useCallback)(Object(E.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(j()+" Starting Game...");case 1:if(!o.current){e.next=6;break}return e.next=4,u().then((function(){o.current&&t.length>1&&(i.a.render(d(),document.getElementById("spinners")),setTimeout((function(){i.a.render("",document.getElementById("spinners"))}),25e3))}));case 4:e.next=1;break;case 6:case"end":return e.stop()}}),e)}))),[t.length,u,d]);return Object(a.useEffect)((function(){return o.current=!0,t.length>1&&x(),function(){o.current=!1,console.log("Stopping Game...")}}),[x]),Object(k.jsxs)(b.a,{children:[Object(k.jsx)(b.a,{sx:{display:"flex",justifyContent:"center",mt:4,color:l.palette.getContrastText(l.palette.background.default),textAlign:"center"},children:t.length>1?Object(k.jsx)(m.a,{variant:"h4",children:"christmas"===n.theme?"SHO-HO-HOTTERUD":"SHOTTERUD"}):Object(k.jsxs)(m.a,{variant:"h4",children:["Velkommen til ",Object(k.jsx)("br",{})," SHOTTERUD"]})}),Object(k.jsx)("div",{id:"spinners"}),Object(k.jsxs)(A.a,{color:"primary",variant:"extended","aria-label":"add",sx:{position:"absolute",bottom:16,right:16},onClick:function(){return c("/settings")},children:[Object(k.jsx)(I.a,{sx:{mr:1}}),"Settings"]})]})}var B=n(3),G=n(162),U=n(165),W=n(174),L=n(175),z=n(166),K=n(94),V=n.n(K),q=n(95),Q=n.n(q);function X(e){var t=e.settings,n=e.setSettings,s=e.names,r=e.setNames,i=Object(H.f)(),l=Object(M.a)(),o=Object(a.useState)(""),d=Object(c.a)(o,2),u=d[0],h=d[1],p=function(e){n(Object(j.a)(Object(j.a)({},t),{},Object(B.a)({},e.target.name,e.target.value)))},g=function(){r((function(e){return e.concat(u)})),h("")};return Object(k.jsx)(b.a,{sx:{display:"flex",width:"100%",justifyContent:"center",color:l.palette.getContrastText(l.palette.background.default)},children:Object(k.jsxs)(b.a,{sx:{maxWidth:"100%",width:"600px",p:4,textAlign:"center"},children:[Object(k.jsx)(m.a,{variant:"h3",sx:{mb:4},children:"Settings"}),Object(k.jsx)(m.a,{children:"Minimum and Maximum Waiting Time"}),Object(k.jsx)(G.a,{name:"minMaxMinutes",value:t.minMaxMinutes,onChange:p,valueLabelDisplay:"auto",sx:{mb:2}}),Object(k.jsxs)(b.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mb:2},children:[Object(k.jsxs)(m.a,{sx:{flex:1,textAlign:"left"},children:["Maximum number of spinners:"," "]}),Object(k.jsxs)(f.a,{name:"amtSpinners",value:t.amtSpinners,label:"Spinners",onChange:p,variant:"standard",children:[Object(k.jsx)(O.a,{value:1,children:"One"}),Object(k.jsx)(O.a,{value:2,children:"Two"}),Object(k.jsx)(O.a,{value:3,children:"Three"}),Object(k.jsx)(O.a,{value:4,children:"Four"})]})]}),Object(k.jsxs)(b.a,{sx:{display:"flex",flexDirection:"row",alignItems:"center",mb:2},children:[Object(k.jsx)(m.a,{sx:{flex:1,textAlign:"left"},children:"Add players:"}),Object(k.jsx)(U.a,{value:u,placeholder:"Name",onChange:function(e){return h(e.target.value)},onKeyDown:function(e){13===e.keyCode&&g()},endAdornment:Object(k.jsx)(W.a,{position:"end",children:Object(k.jsx)(L.a,{onClick:g,children:Object(k.jsx)(V.a,{})})})})]}),Object(k.jsx)(b.a,{sx:0===s.length?{display:"flex",border:"1px solid "+l.palette.action.disabled,borderRadius:1,alignItems:"center",justifyContent:"center",textAlign:"center",minHeight:"100px",mb:2}:{border:"1px solid",borderRadius:1,p:1,textAlign:"left",minHeight:"100px",mb:2},children:s.length>0?s.map((function(e,t){return Object(k.jsx)(z.a,{label:e,sx:{mr:1},color:"primary",onDelete:function(){return t=e,void r(s.filter((function(e){return e!==t})));var t}},t)})):Object(k.jsx)(m.a,{variant:"h4",children:"No Players :("})}),Object(k.jsx)(x.a,{variant:"outlined",startIcon:Object(k.jsx)(Q.a,{}),onClick:function(){return r([])},children:"Delete All"}),Object(k.jsxs)(A.a,{color:"primary",variant:"extended","aria-label":"add",sx:{position:"absolute",bottom:16,right:16},onClick:function(){return i("/")},children:[Object(k.jsx)(v.a,{sx:{mr:1}}),"Save and go back to game"]})]})})}var Y=n(58),Z=function(e,t){window.sessionStorage.setItem(e,t)},$=function(e){return window.sessionStorage.getItem(e)},_=n(158);var ee=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],s=t[1],r=Object(a.useState)([]),i=Object(c.a)(r,2),j=i[0],d=i[1],u=Object(a.useState)({amtSpinners:1,minMaxMinutes:[15,30],theme:"default"}),b=Object(c.a)(u,2),m=b[0],x=b[1],f=Object(a.useState)(!1),O=Object(c.a)(f,2),h=O[0],p=O[1];return Object(a.useEffect)((function(){var e=JSON.parse($("names")),t=JSON.parse($("settings"));e&&s(e),JSON.stringify(t)!==JSON.stringify(m)&&x(t),p(!0)}),[]),Object(a.useEffect)((function(){n&&Z("names",JSON.stringify(n))}),[n]),Object(a.useEffect)((function(){Z("settings",JSON.stringify(m))}),[m]),h?Object(k.jsxs)(l.a,{theme:Object(o.a)(N[m.theme]),children:[Object(k.jsx)(_.a,{}),Object(k.jsx)(C,{prevNames:j,setPrevNames:d,settings:m,setSettings:x}),Object(k.jsx)(Y.a,{children:Object(k.jsxs)(H.c,{children:[Object(k.jsx)(H.a,{path:"/",element:Object(k.jsx)(F,{names:n,settings:m,prevNames:j,setPrevNames:d})}),Object(k.jsx)(H.a,{path:"/settings",element:Object(k.jsx)(X,{settings:m,setSettings:x,names:n,setNames:s})})]})})]}):Object(k.jsx)("div",{children:"Loading..."})};i.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(ee,{})}),document.getElementById("root"))},50:function(e){e.exports=JSON.parse('{"default":{"name":"Default","palette":{"primary":{"main":"#0052cc"},"secondary":{"main":"#edf2ff"}},"typography":{"fontFamily":["Roboto"]}},"christmas":{"name":"Christmas","palette":{"primary":{"main":"#00873E"},"secondary":{"main":"#edf2ff"},"background":{"default":"#C30F16"}},"typography":{"fontFamily":["Roboto"]}}}')}},[[116,1,2]]]);
//# sourceMappingURL=main.eea89c82.chunk.js.map